<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">

        <link rel="icon" href="assets/favicon.ico"> 
        <title>{{ title }}</title>
        <meta name="description" content="{{ description }}">

        <link rel="stylesheet" href="/css/nav.css">
        <link rel="stylesheet" href="/css/flatly.css">
        <link rel="stylesheet" href="/css/hamburgers.css">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    </head>
    <body>
        <div class="wrapper">
            {% block nav %}
            <nav id="sidebar" class="active">
                <div id="dark-mode-div" class="row">
                    <input id="dark-mode-toggle" name="dark-mode-toggle" type="checkbox" />
                    &nbsp;&nbsp;
                    <i class="fas fa-user-ninja fa-lg"></i>
                </div>
                <h1 id="crown">üëë</h1>
                <img id="profile-pic" src="assets/peace.png">
                <h3>Sebastien Ringrose</h3>
                <ul id="profile-links" class="row">
                    <li>
                        <a target="_blank" href="https://github.com/sejori">
                            <i class="fab fa-github fa-2x"></i>
                        </a>
                    </li>
                    <li>
                        <a target="_blank" href="https://linkedin.com/in/sebastien-ringrose-375047134">
                            <i class="fab fa-linkedin fa-2x"></i>
                        </a>
                    </li>
                    <li>
                        <a target="_blank" href="https://www.instagram.com/sebastienringrose/">
                            <i class="fab fa-instagram fa-2x"></i>
                        </a>
                    </li>
                    <li>
                        <a target="_blank" href="https://theempire.dev/">
                            <i class="fas fa-comment-dollar fa-2x"></i>
                        </a>
                    </li>
                    <li>
                        <a target="_blank" href="mailto:seb@thesebsite.com">
                            <i class="fas fa-at fa-2x"></i>
                        </a>
                    </li>
                </ul>
                <ul id="nav-links" class="nav nav-pills flex-column">
                    <li class="nav-item">
                        <a class="nav-link" href="/">
                            <h3>üè†&nbsp;&nbsp;&nbsp;Home</h3>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/projects">
                            <h3>üöÄ&nbsp;&nbsp;&nbsp;Projects</h3>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/blog">
                            <h3>‚úçÔ∏è&nbsp;&nbsp;&nbsp;Blog</h3>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/blog">
                            <h3>üìá&nbsp;&nbsp;&nbsp;About</h3>
                        </a>
                    </li>
                </ul>
            </nav>
            {% endblock %}

            {% block main %}
            <div id="content">
                <button id="nav-button" class="inserted hamburger hamburger--arrow is-active" type="button">
                    <span class="hamburger-box">
                        <span class="hamburger-inner"></span>
                    </span>
                </button>
                <main>
                    {{ content | safe }}
                </main>
            </div>
            {% endblock %}
        </div>

        <script>
            // change theme if darkmode
            function enableDarkMode () {
                let styleLink = document.createElement("link")
                styleLink.rel = "stylesheet"
                styleLink.href = "css/darkly.css"
                document.head.appendChild(styleLink)
                window.localStorage.setItem("darkmode", true)
            }
            function disableDarkMode () {
                let styleLink = document.createElement("link")
                styleLink.rel = "stylesheet"
                styleLink.href = "css/flatly.css"
                document.head.appendChild(styleLink)
                window.localStorage.setItem("darkmode", false)
            }
            if (window.localStorage.getItem("darkmode") === "true") {
                enableDarkMode()
                document.querySelector("#dark-mode-toggle").checked = true
            }

            window.addEventListener("load", () => {
                // nav toggle listener
                const navButton = document.querySelector("#nav-button")
                navButton.addEventListener("click", () => {
                    const sidebar = document.querySelector("#sidebar") 
                    sidebar.classList.toggle("active")
                    if (!sidebar.classList.contains("active")) { 
                        sidebar.style.marginLeft = (window.innerWidth < 400) ? -window.innerWidth + "px" : "-400px"
                    } else sidebar.style.marginLeft = 0
                    navButton.classList.toggle("inserted")
                    navButton.classList.toggle("is-active")
                })

                // set active nav link
                let navLinks = document.querySelector("#nav-links")
                Array.from(navLinks.children).forEach(link => {
                    if (link.href === window.location.pathname) link.classList.toggle("active")
                })

                // dark mode toggel listener
                document.querySelector("#dark-mode-toggle").addEventListener("click", (e) => {
                    if (e.target.checked) { 
                        enableDarkMode()
                    } else disableDarkMode()
                    return location.reload()
                })
            })
        </script>
        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    </body>
</html>